var mkp,mkpaa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};function mkpba(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var mkpca=mkpba(this);
function mkpda(a,b){if(b)a:{var c=mkpca;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&mkpaa(c,a,{configurable:!0,writable:!0,value:b})}}mkpda("Promise.prototype.finally",function(a){return a?a:function(b){return this.then(function(c){return Promise.resolve(b()).then(function(){return c})},function(c){return Promise.resolve(b()).then(function(){throw c;})})}});/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var mkpa=this||self;
function mkpb(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
b&&"undefined"==typeof a.call)return"object";return b}function mkpc(a){return"array"==mkpb(a)}function mkpd(a){var b=mkpb(a);return"array"==b||"object"==b&&"number"==typeof a.length}function mkpe(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var mkpf="closure_uid_"+(1E9*Math.random()>>>0),mkpg=0;
function mkph(a,b){a=a.split(".");var c=mkpa;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}:c[d]=b}function mkpea(a,b){function c(){}c.prototype=b.prototype;a.ib=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Za=function(d,e,f){for(var g=Array(arguments.length-2),k=2;k<arguments.length;k++)g[k-2]=arguments[k];return b.prototype[e].apply(d,g)}};var ngDevMode=null;function mkpi(a,b,c){Array.prototype.forEach.call(a,b,c)}function mkpfa(a,b){return Array.prototype.some.call(a,b,void 0)}function mkpj(a){if(!mkpc(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function mkpk(a){return Array.prototype.concat.apply([],arguments)}function mkpga(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}
function mkpl(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if(mkpc(d))for(var e=0;e<d.length;e+=8192){var f=mkpga(d,e,e+8192);f=mkpl.apply(null,f);for(var g=0;g<f.length;g++)b.push(f[g])}else b.push(d)}return b};function mkpm(a){const b=[];let c=0;for(const d in a)b[c++]=a[d];return b}function mkpn(a){const b=[];let c=0;for(const d in a)b[c++]=d;return b}function mkpha(a){const b={};for(const c in a)b[c]=a[c];return b}function mkpia(a){const b=arguments.length;if(1==b&&mkpc(arguments[0]))return mkpia.apply(null,arguments[0]);const c={};for(let d=0;d<b;d++)c[arguments[d]]=!0;return c};function mkpo(a,b,c){if(c.get&&!c.set){var d=c.get,e=`__lazy__${b}`;c.get=function(){this.hasOwnProperty(e)||(this[e]=d.apply(this,arguments));return this[e]}}};function mkpp(a){return"string"==typeof a}function mkpq(a){return"function"===typeof a}function mkpja(a){const b=typeof a;return"object"==b&&null!=a||"function"==b}function mkpka(a){return function(b){return Array.isArray(b)&&b.every(a)}};function mkpla(a,b){for(const c in a)if(!b.call(void 0,a[c],c,a))return!1;return!0};function mkpma(a){return b=>void 0===b||a(b)}function mkpna(a){return b=>null===b||void 0===b||a(b)};function mkpoa(...a){return function*(){for(const b of a)yield*b()}};function mkppa(a){return function(){return[Array.from(a())]}}function mkpqa(){return[null,void 0]};var mkpra=class{constructor(a,b,c){this.pa=a;this.qa=b;this.oa=c}};var mkpr=class extends mkpra{constructor(a,b,c,d){super(a,b,c);this.ia=d}get ea(){return new mkpr(a=>a.map(b=>this.pa(b)),a=>a.map(b=>this.qa(b)),mkpka(this.oa),mkppa(this.ia))}get Ja(){return new mkpr(a=>a&&this.pa(a),a=>a&&this.qa(a),mkpna(this.oa),mkpoa(this.ia,mkpqa))}};__decorate([mkpo,__metadata("design:type",mkpr),__metadata("design:paramtypes",[])],mkpr.prototype,"ea",null);__decorate([mkpo,__metadata("design:type",mkpr),__metadata("design:paramtypes",[])],mkpr.prototype,"Ja",null);
var mkpsa=class extends mkpr{constructor(a,b){const c=d=>d;super(c,c,a,b)}get ea(){return new mkpsa(mkpka(this.oa),mkppa(this.ia))}};__decorate([mkpo,__metadata("design:type",mkpr),__metadata("design:paramtypes",[])],mkpsa.prototype,"ea",null);mkph("lucid.Products",{Va:"none",Ua:"chart",Press:"press",Ya:"spark",Wa:"lucidscale",Xa:"socrates",Ta:"teamspaces",$a:"chart",gb:"press"});mkph("lucid.Products.none","none");mkph("lucid.Products.chart","chart");mkph("lucid.Products.press","press");function mkps(a,b){a=mkpa.lucidConfigure&&mkpa.lucidConfigure[a];return void 0===a?b:a};var mkpta=mkps("lucid_host","");mkpta.replace("https://support-a.","https://");mkpta.replace("https://","");var mkpt=mkps("analyticsServiceHost","");mkpia(mkps("known_image_sizes")||[]);const mkpua=(()=>{if(mkpa.location)switch(mkpa.location.hostname){case "www.lucidchart.com":case "support-a.lucidchart.com":case "app.lucidchart.com":case "support-a.app.lucidchart.com":case "developer.lucid.co":case "lucidspark.com":case "lucid.app":case "lucid.co":case "lucidscale.com":case "lucidforeducation.com":case "training.lucid.co":case "help.lucid.co":case "lucidchart.zendesk.com":case "lucidspark.zendesk.com":case "lucidscale.zendesk.com":case "lucidforeducation.zendesk.com":return"https://analytics.lucid.app";
case "www.lucidchart.eu":case "support-a.lucidchart.eu":return"https://analytics.lucidchart.eu";case "www.lucidpress.com":case "support-a.lucidpress.com":case "app.lucidpress.com":case "support-a.app.lucidpress.com":return"https://analytics.app.lucidpress.com";case "www.preprodchart.com":case "app.preprodchart.com":case "developer.lucidpreprod.app":case "preprodspark.lucidmarketingtest.com":case "preprodscale.lucidmarketingtest.com":case "lucidchart.preprod.lucidmarketingtest.com":case "lucidscale.preprod.lucidmarketingtest.com":case "lucidspark.preprod.lucidmarketingtest.com":return"https://analytics.lucidpreprod.app";
case "www.preprodpress.com":case "app.preprodpress.com":return"https://analytics.app.preprodpress.com";default:return`https://analytics${2<mkpa.location.hostname.split(".").length?"-":"."}${mkpa.location.hostname}`}else return""})();mkpa.lucidConfigure=mkpa.lucidConfigure||{};mkpa.lucidConfigure.analyticsServiceHost||(mkpa.lucidConfigure.analyticsServiceHost=mkpua);mkpt||(mkpt=mkpua);var mkpu=class{constructor(a,b,c,d,e,f,g=!1){this.key=a;this.useClass=b;this.ha=c;this.N=d;this.value=e;this.V=f;this.la=g;if(null==b&&null==c&&void 0===e)throw console.error(a),Error("Provider constructed without a class, factory, or value.");}};function mkpv(a){return a.map(b=>{if(b instanceof mkpu)throw Error("lucid.provide return value should not be passed into injectables or factories. Pass a class or AnyProvideId.");return b instanceof mkpw?b:new mkpw(b)})}
var mkpw=class{constructor(a,b=0){this.type=a;this.operation=b}};function mkpva(a){return!!a};var mkpwa=Symbol("deepCopy");function mkpx(a,b){if(null==a||"object"!=typeof a||100<b)return a;if(a instanceof Set){const d=new Set;a.forEach(e=>{d.add(mkpx(e,b+1))});return d}if(a instanceof Map){var c=new Map;for(const [d,e]of a)a=e,c.set(mkpx(d,b+1),mkpx(a,b+1));return c}if(mkpc(a))return a.map(d=>mkpx(d,b+1));if(a instanceof Date)return new Date(a);if(mkpwa in a)return a[mkpwa](b+1);c={};for(const d in a)c[d]=mkpx(a[d],b+1);return c};function mkpxa(a,b){return[].concat(...a.map(b,void 0))};function mkpy(){0!=mkpz&&(mkpya[this[mkpf]||(this[mkpf]=++mkpg)]=this)}var mkpz=0,mkpya={};mkpy.prototype.J=!1;mkpy.prototype.dispose=function(){if(!this.J&&(this.J=!0,this.G(),0!=mkpz)){var a=this[mkpf]||(this[mkpf]=++mkpg);if(0!=mkpz&&this.W&&0<this.W.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete mkpya[a]}};
function mkpza(a,b){a.J?b.dispose():(a.T||(a.T=[]),a.T.push(b))}mkpy.prototype.G=function(){if(this.W)for(;this.W.length;)this.W.shift()();if(this.T)for(;this.T.length;)this.T.shift().dispose()};var mkpAa=class extends mkpy{};function mkpBa(a){const b=new Set,c=d=>{b.has(d)||(b.add(d),d.ra.forEach(c),d.item instanceof mkpy&&d.item.dispose())};a.nodes.forEach(c);a.nodes.clear()}
var mkpEa=class extends mkpy{constructor(a){super();this.nodes=new Map;mkpza(a,this)}add(a,b){if(!this.nodes.has(a)){b=b.map(d=>this.nodes.get(d)).filter(mkpva);var c=new mkpCa(a);b.forEach(d=>{d.ra.add(c)});this.nodes.set(a,c)}}G(){const a=[],b=()=>{try{mkpBa(this)}catch(c){c instanceof mkpDa?a.push(...c.errors):a.push(c),b()}};b();if(0<a.length)throw new mkpDa(a);super.G()}};class mkpCa{constructor(a){this.item=a;this.ra=new Set}}
var mkpDa=class extends Error{constructor(a){super(`Failed to properly dispose ${a.length} disposable injectables!`);this.errors=a}};function mkpA(a){return a.name?a.name:a.wa?a.wa:"function"==mkpb(a)?(a=a.toString(),a.substr(0,a.indexOf(")")+1)):"Unnamed ProvideId"};var mkpB=class{constructor(a,b){this.key=a;this.V=b;this.la=!1;if(!a)throw Error("lucid.provide called with invalid key");}useFactory(a,...b){return new mkpu(this.key,null,a,mkpv(b),null,this.V,this.la)}useValue(a){return new mkpu(this.key,null,null,null,a,this.V,this.la)}static resolve(a){return mkpl(a).map(b=>{if(b)return b instanceof mkpu?b:new mkpu(b,b,null,null,null,!1);throw Error("Cannot provide undefined or null. Did you forget to goog.require your dependencies?");})}};var mkpC=class{constructor(){this.wa="XHRModifierId"}};class mkpFa{}var mkpGa={},mkpD={};class mkpHa extends Error{}function mkpE(a,b){return new mkpHa(`${b}
Build path ${a.fa.map(mkpA).join(" -> ")}
for injector at ${a.Ga}
stack:`)}function mkpIa(a,b){if(a.l.get(b))return a.get(b);if(a.parent)return mkpIa(a.parent,b)}function mkpJa(a){return(a=mkpF.get(a))?a.O:[]}function mkpKa(a,b,c){c=c.map(a.ja.bind(a));const d=b.apply(null,c);c.find(e=>e==d)||a.sa.add(d,c);return d}
function mkpG(a,b){if(b.useClass){b=b.useClass;var c=mkpF.get(b);if(c)c=c.O.map(a.ja.bind(a)),c.unshift(b),b=new (Function.prototype.bind.apply(b,c)),a.sa.add(b,c),a=b;else throw mkpE(a,`${mkpA(b)} not annotated for use in the injector. Use @LucidInjectable to setup injection`);}else a=b.ha&&b.N?mkpKa(a,b.ha,b.N):b.value;return a}
function mkpLa(a,b){var c;let d=null===(c=a.l.get(b))||void 0===c?void 0:c.P;d||(d=mkpH.get(b))||(d=mkpB.resolve(b)[0]);b=[];if(d instanceof mkpu){if(d.useClass){if(c=mkpF.get(d.useClass))return mkpxa(c.O,e=>3===e.operation?mkpJa(e.type).map(f=>f.type):[e.type]).concat(b);throw mkpE(a,`${mkpA(d.useClass)} is not annotated for use in the injector`);}if(d.ha&&d.N)return d.N.map(e=>e.type).concat(b)}else return d.ab;return[]}
function mkpI(a,b,c){let d=a.l.get(b);d||(d={Aa:!0,P:mkpB.resolve(b)[0],value:null},a.l.set(b,d));d.value||c||(d.value=mkpG(a,d.P));return d.value}function mkpMa(a,b,c){const d=a.parent?a.parent.get(b,c):[];return a.l.has(b)?(a=d.concat(mkpI(a,b,c)).filter(e=>e!==mkpD),b=Array.prototype.lastIndexOf.call(a,void 0,a.length-1),-1!=b&&(a=a.slice(b+1)),a):d}function mkpJ(a,b){const c=a.l.get(b);return c&&!c.Aa||a.parent&&mkpJ(a.parent,b)||!1}
function mkpNa(a,b){let c=a.na.get(b);void 0===c&&(c=a.l.has(b)?!0:a.parent&&mkpJ(a.parent,b)?!1:b instanceof mkpC?!1:mkpLa(a,b).some(d=>mkpNa(a,d)),a.na.set(b,c));return c}
var mkpK=class extends mkpAa{constructor(a,b){super();this.l=new Map;this.fa=[];this.Ba=void 0;this.S=new Map;this.sa=new mkpEa(this);this.na=new Map;null===b||void 0===b?void 0:mkpza(b,this);this.parent=b;mkpB.resolve(a).forEach(c=>{if(c instanceof mkpu&&c.V){let d=this.S.get(c.key);d||(d=this.parent instanceof mkpK&&this.parent.S.get(c.key)||[],this.S.set(c.key,d));d.push(c);if(c.value===mkpD)c=new mkpu(c.key,null,()=>{if(this.parent instanceof mkpK){const e=this.parent.S.get(c.key);if(e)return[void 0,
...e.map(f=>{if(f.value!==mkpGa)return mkpG(this,f)}).filter(f=>f!==mkpD)]}return[]},[],null,!0);else if(c.value===mkpGa)c=new mkpu(c.key,null,()=>[void 0],[],null,!0);else{const e=c,f=this.l.get(c.key);c=new mkpu(e.key,null,()=>{const g=f?mkpG(this,f.P):[];g.push(mkpG(this,e));return g},[],null,!0)}}this.l.set(c.key,{P:c,value:null})});mkpL.forEach((c,d)=>{var e,f;this.l.has(d)||(null===(f=null===(e=c.N)||void 0===e?void 0:e[0])||void 0===f?0:f.type)&&this.l.has(c.N[0].type)&&this.l.set(d,{P:c,value:null})});
this.Ga=" [compiled code]"}G(){var a;this.l.clear();this.S.clear();this.na.clear();null===(a=this.Ba)||void 0===a?void 0:a.clear();super.G()}ja(a){this.fa.push(a.type);try{switch(a.operation){case 0:return this.get(a.type);case 3:return mkpJa(a.type).map(this.ja.bind(this));case 2:return this.getOptional(a.type);case 1:return mkpIa(this,a.type)}}catch(b){if(b instanceof mkpHa)throw b;if(b instanceof Error)throw mkpE(this,b.stack?b.stack:b.message);throw b;}finally{this.fa.pop()}}get(a,b){if(a instanceof
mkpC)return mkpMa(this,a,b);if(this.l.has(a))return mkpI(this,a,b);if(this.parent&&mkpJ(this.parent,a))return this.parent.get(a,b);var c,d;(d=mkpF.has(a)&&!1!==(null===(c=mkpF.get(a))||void 0===c?void 0:c.options.Ma))||(d=mkpH.has(a)||mkpL.has(a));if(d)return!this.parent||mkpNa(this,a)?((c=mkpH.get(a))&&this.l.set(a,{P:c,value:null,Aa:!0}),mkpI(this,a,b)):this.parent.get(a,b);throw mkpE(this,`No provider given for ${mkpA(a)}`);}has(a){return this.l.has(a)||this.parent&&this.parent.has(a)||!1}getOptional(a){try{return this.get(a)}catch(b){}}static register(a,
b,c={}){let d=a,e=mkpF.get(d);for(;!e&&d&&0===d.length&&d.length!==b.length;)d=Object.getPrototypeOf(d),e=mkpF.get(d);if(e){const f=e.O;b=b.map((g,k)=>f[k]?f[k].type===mkpFa?new mkpw(g.type,f[k].operation):f[k]:g)}mkpF.set(a,{O:b,options:c});return b}},mkpF=new Map,mkpH=new Map,mkpL=new Map;function mkpOa(a){return a};function mkpM(){return a=>{var b=Reflect.getMetadata("design:paramtypes",a)||[];mkpK.register(a,mkpv(b),void 0)}};var mkpN=class{static parse(a,b){return JSON.parse(a,b)}parse(a,b){return JSON.parse(a,b)}static stringify(a,b,c){return JSON.stringify(a,b,c)}stringify(a,b,c){return JSON.stringify(a,b,c)}};mkpN=__decorate([mkpM()],mkpN);function mkpO(){this.id=`${mkpPa.name}_${mkpQa++}`}mkpO.prototype.toString=function(){return this.id};let mkpQa=0;function mkpP(){var a=mkpRa;this.type=a instanceof mkpO?String(a):a;this.currentTarget=this.target=void 0;this.defaultPrevented=!1}mkpP.prototype.stopPropagation=function(){};mkpP.prototype.preventDefault=function(){this.defaultPrevented=!0};let mkpSa=1;
var mkpTa=class extends mkpy{listen(a,b,c,d){this.o||(this.o=new Map);c=this.o.get(a.toString());c||(c=[],this.o.set(a.toString(),c));a={src:this,type:a.toString(),listener:b,capture:!1,ta:d,key:mkpSa++};c.push(a);return a}dispatchEvent(a){const b=this.eb;if(this.o){let c=this.o.get(mkpe(a)&&a.type?a.type.toString():a.toString());if(c){c=c.slice();for(let d=0;d<c.length;d++){const e=c[d];e.ta?e.listener.call(e.ta,a):e.listener(a)}}}return!b||b instanceof mkpy&&b.J?!1:b.dispatchEvent(a)}removeAllListeners(){return this.o?(this.o.clear(),
1):0}hasListener(a){if(!this.o)return!1;const b=a&&a.toString();for(const [c,d]of this.o){const e=c;if(0<d.length&&(void 0===a||e==b))return!0}return!1}G(){this.o&&(this.o.forEach(a=>a.forEach(b=>b.removed=!0)),this.o.clear());super.G()}};mkpTa.prototype["closure_listenable_"+(1E6*Math.random()|0)]=!0;function mkpQ(a,b){this.ua=a;this.za=b}mkpQ.prototype.getKey=function(){return this.ua};mkpQ.prototype.getValue=function(){return this.za};mkpQ.prototype.clone=function(){return new mkpQ(this.ua,this.za)};function mkpR(a){this.B=[];if(a)a:{if(a instanceof mkpR){var b=a.C();a=a.s();if(0>=this.R()){for(var c=this.B,d=0;d<b.length;d++)c.push(new mkpQ(b[d],a[d]));break a}}else b=mkpn(a),a=mkpm(a);for(d=0;d<b.length;d++)this.insert(b[d],a[d])}}mkp=mkpR.prototype;mkp.insert=function(a,b){var c=this.B;c.push(new mkpQ(a,b));a=c.length-1;b=this.B;for(c=b[a];0<a;){var d=a-1>>1;if(b[d].getKey()>c.getKey())b[a]=b[d],a=d;else break}b[a]=c};
mkp.remove=function(){var a=this.B,b=a.length,c=a[0];if(!(0>=b)){if(1==b)mkpj(a);else{a[0]=a.pop();a=0;b=this.B;for(var d=b.length,e=b[a];a<d>>1;){var f=2*a+1,g=2*a+2;f=g<d&&b[g].getKey()<b[f].getKey()?g:f;if(b[f].getKey()>e.getKey())break;b[a]=b[f];a=f}b[a]=e}return c.getValue()}};mkp.s=function(){for(var a=this.B,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].getValue());return b};mkp.C=function(){for(var a=this.B,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].getKey());return b};
mkp.M=function(a){return mkpfa(this.B,function(b){return b.getKey()==a})};mkp.clone=function(){return new mkpR(this)};mkp.R=function(){return this.B.length};mkp.isEmpty=function(){return 0==this.B.length};mkp.clear=function(){mkpj(this.B)};function mkpS(){mkpR.call(this)}mkpea(mkpS,mkpR);mkpS.prototype.enqueue=function(a,b){this.insert(a,b)};mkpS.prototype.dequeue=function(){return this.remove()};function mkpUa(a){if(a.s&&"function"==typeof a.s)return a.s();if("string"===typeof a)return a.split("");if(mkpd(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return mkpm(a)}
function mkpVa(a,b,c){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,c);else if(mkpd(a)||"string"===typeof a)mkpi(a,b,c);else{if(a.C&&"function"==typeof a.C)var d=a.C();else if(a.s&&"function"==typeof a.s)d=void 0;else if(mkpd(a)||"string"===typeof a){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=mkpn(a);e=mkpUa(a);f=e.length;for(var g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};function mkpT(a,b){this.D={};this.j=[];this.g=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}mkp=mkpT.prototype;mkp.R=function(){return this.g};mkp.s=function(){mkpU(this);for(var a=[],b=0;b<this.j.length;b++)a.push(this.D[this.j[b]]);return a};mkp.C=function(){mkpU(this);return this.j.concat()};mkp.M=function(a){return mkpV(this.D,a)};
mkp.equals=function(a,b){if(this===a)return!0;if(this.g!=a.R())return!1;b=b||mkpWa;mkpU(this);for(var c,d=0;c=this.j[d];d++)if(!b(this.get(c),a.get(c)))return!1;return!0};function mkpWa(a,b){return a===b}mkp.isEmpty=function(){return 0==this.g};mkp.clear=function(){this.D={};this.g=this.j.length=0};mkp.remove=function(a){return mkpV(this.D,a)?(delete this.D[a],this.g--,this.j.length>2*this.g&&mkpU(this),!0):!1};
function mkpU(a){if(a.g!=a.j.length){for(var b=0,c=0;b<a.j.length;){var d=a.j[b];mkpV(a.D,d)&&(a.j[c++]=d);b++}a.j.length=c}if(a.g!=a.j.length){var e={};for(c=b=0;b<a.j.length;)d=a.j[b],mkpV(e,d)||(a.j[c++]=d,e[d]=1),b++;a.j.length=c}}mkp.get=function(a,b){return mkpV(this.D,a)?this.D[a]:b};mkp.set=function(a,b){mkpV(this.D,a)||(this.g++,this.j.push(a));this.D[a]=b};
mkp.addAll=function(a){if(a instanceof mkpT)for(var b=a.C(),c=0;c<b.length;c++)this.set(b[c],a.get(b[c]));else for(b in a)this.set(b,a[b])};mkp.forEach=function(a,b){for(var c=this.C(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};mkp.clone=function(){return new mkpT(this)};function mkpV(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var mkpXa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mkpYa(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e=null;if(0<=d){var f=a[c].substring(0,d);e=a[c].substring(d+1)}else f=a[c];b(f,e?decodeURIComponent(e.replace(/\+/g," ")):"")}}};function mkpW(a){this.A=this.L=this.I="";this.F=null;this.K=this.Z="";this.u=this.Ha=!1;if(a instanceof mkpW){this.u=a.u;mkpX(this,a.I);var b=a.L;mkpY(this);this.L=b;this.setDomain(a.A);mkpZ(this,a.F);this.setPath(a.getPath());mkp_(this,a.v.clone());a=a.K;mkpY(this);this.K=a}else a&&(b=String(a).match(mkpXa))?(this.u=!1,mkpX(this,b[1]||"",!0),a=b[2]||"",mkpY(this),this.L=mkp0(a),this.setDomain(b[3]||"",!0),mkpZ(this,b[4]),this.setPath(b[5]||"",!0),mkp_(this,b[6]||"",!0),a=b[7]||"",mkpY(this),this.K=
mkp0(a)):(this.u=!1,this.v=new mkp1(null,this.u))}mkp=mkpW.prototype;
mkp.toString=function(){var a=[],b=this.I;b&&a.push(mkp2(b,mkpZa,!0),":");var c=this.A;if(c||"file"==b)a.push("//"),(b=this.L)&&a.push(mkp2(b,mkpZa,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.F,null!=c&&a.push(":",String(c));if(c=this.getPath())this.A&&"/"!=c.charAt(0)&&a.push("/"),a.push(mkp2(c,"/"==c.charAt(0)?mkp_a:mkp0a,!0));(c=this.v.toString())&&a.push("?",c);(c=this.K)&&a.push("#",mkp2(c,mkp1a));return a.join("")};
mkp.resolve=function(a){var b=this.clone(),c=!!a.I;c?mkpX(b,a.I):c=!!a.L;if(c){var d=a.L;mkpY(b);b.L=d}else c=!!a.A;c?b.setDomain(a.A):c=null!=a.F;d=a.getPath();if(c)mkpZ(b,a.F);else if(c=!!a.Z){if("/"!=d.charAt(0))if(this.A&&!this.Z)d="/"+d;else{var e=b.getPath().lastIndexOf("/");-1!=e&&(d=b.getPath().substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(-1!=e.indexOf("./")||-1!=e.indexOf("/.")){d=0==e.lastIndexOf("/",0);e=e.split("/");for(var f=[],g=0;g<e.length;){var k=e[g++];"."==k?d&&g==e.length&&
f.push(""):".."==k?((1<f.length||1==f.length&&""!=f[0])&&f.pop(),d&&g==e.length&&f.push("")):(f.push(k),d=!0)}d=f.join("/")}else d=e}c?b.setPath(d):c=""!==a.v.toString();c?mkp_(b,a.v.clone()):c=!!a.K;c&&(a=a.K,mkpY(b),b.K=a);return b};mkp.clone=function(){return new mkpW(this)};function mkpX(a,b,c){mkpY(a);a.I=c?mkp0(b,!0):b;a.I&&(a.I=a.I.replace(/:$/,""))}mkp.setDomain=function(a,b){mkpY(this);this.A=b?mkp0(a,!0):a;return this};
function mkpZ(a,b){mkpY(a);if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.F=b}else a.F=null}mkp.getPath=function(){return this.Z};mkp.setPath=function(a,b){mkpY(this);this.Z=b?mkp0(a,!0):a;return this};function mkp_(a,b,c){mkpY(a);b instanceof mkp1?(a.v=b,a.v.ma(a.u)):(c||(b=mkp2(b,mkp2a)),a.v=new mkp1(b,a.u));return a}mkp.setQuery=function(a,b){return mkp_(this,a,b)};mkp.getQuery=function(){return this.v.toString()};function mkp3a(a,b,c){mkpY(a);a.v.set(b,c)}
mkp.removeParameter=function(a){mkpY(this);this.v.remove(a);return this};function mkpY(a){if(a.Ha)throw Error("Tried to modify a read-only Uri");}mkp.ma=function(a){this.u=a;this.v&&this.v.ma(a)};function mkp0(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function mkp2(a,b,c){return"string"===typeof a?(a=encodeURI(a).replace(b,mkp4a),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}
function mkp4a(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var mkpZa=/[#\/\?@]/g,mkp0a=/[#\?:]/g,mkp_a=/[#\?]/g,mkp2a=/[#\?@]/g,mkp1a=/#/g;function mkp1(a,b){this.g=this.i=null;this.m=a||null;this.u=!!b}function mkp3(a){a.i||(a.i=new mkpT,a.g=0,a.m&&mkpYa(a.m,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))}mkp=mkp1.prototype;mkp.R=function(){mkp3(this);return this.g};
mkp.add=function(a,b){mkp3(this);this.m=null;a=mkp4(this,a);var c=this.i.get(a);c||this.i.set(a,c=[]);c.push(b);this.g+=1;return this};mkp.remove=function(a){mkp3(this);a=mkp4(this,a);return this.i.M(a)?(this.m=null,this.g-=this.i.get(a).length,this.i.remove(a)):!1};mkp.clear=function(){this.i=this.m=null;this.g=0};mkp.isEmpty=function(){mkp3(this);return 0==this.g};mkp.M=function(a){mkp3(this);a=mkp4(this,a);return this.i.M(a)};
mkp.forEach=function(a,b){mkp3(this);this.i.forEach(function(c,d){mkpi(c,function(e){a.call(b,e,d,this)},this)},this)};mkp.C=function(){mkp3(this);for(var a=this.i.s(),b=this.i.C(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};mkp.s=function(a){mkp3(this);var b=[];if("string"===typeof a)this.M(a)&&(b=mkpk(b,this.i.get(mkp4(this,a))));else{a=this.i.s();for(var c=0;c<a.length;c++)b=mkpk(b,a[c])}return b};
mkp.set=function(a,b){mkp3(this);this.m=null;a=mkp4(this,a);this.M(a)&&(this.g-=this.i.get(a).length);this.i.set(a,[b]);this.g+=1;return this};mkp.get=function(a,b){if(!a)return b;a=this.s(a);return 0<a.length?String(a[0]):b};mkp.setValues=function(a,b){this.remove(a);if(0<b.length){this.m=null;var c=this.i,d=c.set;a=mkp4(this,a);var e=b.length;if(0<e){for(var f=Array(e),g=0;g<e;g++)f[g]=b[g];e=f}else e=[];d.call(c,a,e);this.g+=b.length}};
mkp.toString=function(){if(this.m)return this.m;if(!this.i)return"";for(var a=[],b=this.i.C(),c=0;c<b.length;c++){var d=b[c],e=encodeURIComponent(String(d));d=this.s(d);for(var f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}}return this.m=a.join("&")};mkp.clone=function(){var a=new mkp1;a.m=this.m;this.i&&(a.i=this.i.clone(),a.g=this.g);return a};function mkp4(a,b){b=String(b);a.u&&(b=b.toLowerCase());return b}
mkp.ma=function(a){a&&!this.u&&(mkp3(this),this.m=null,this.i.forEach(function(b,c){var d=c.toLowerCase();c!=d&&(this.remove(c),this.setValues(d,b))},this));this.u=a};mkp.extend=function(a){for(var b=0;b<arguments.length;b++)mkpVa(arguments[b],function(c,d){this.add(d,c)},this)};function mkp5a(){if("function"!==typeof Promise)throw Error("No promise library available");let a=void 0,b=void 0;const c=new Promise((d,e)=>{a=d;b=e});if(!a||!b)throw Error("Promise constructor does not provide proper arguments to callback");return{resolve:a,reject:b,promise:c,then:c.then.bind(c),catch:c.catch.bind(c),finally:c.finally.bind(c),[Symbol.toStringTag]:c[Symbol.toStringTag]}};function mkp6a(a,b){if(Infinity==b)return a;const c=(new Promise(d=>{setTimeout(()=>{d()},b)})).then(()=>{throw new DOMException("request timed out","TimeoutError");});return Promise.race([a,c])}new Promise(()=>{});function mkp7a(){function a(c,d){for(let e=0;e<d;e++)b+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_.~"[c%66],c=Math.floor(c/66)}let b="";a(Math.floor(Date.now()/1E3),4);a(Math.floor(Math.random()*Math.pow(66,4)),4);a(Math.floor(Math.random()*Math.pow(66,4)),4);return b};function mkp8a(a,b){b.fb=a;return b};var mkp5;const mkp9a=function(a){return b=>Array.isArray(b)||!mkpja(b)?!1:mkpla(a,(c,d)=>c(b[d]))}({responseText:mkpp,response:mkpma(function(){return!0}),status:function(a){return"number"==typeof a},abort:mkpq,getResponseHeader:mkpq,getAllResponseHeaders:mkpq,responseURL:mkpma(mkpp)});function mkp$a(a){let b=!1;a.ka.push(setInterval(mkp8a("si:XHR.InFlightHammer",()=>{const c=a.H>=a.va;b&&c&&(a.H=0);b=c}),3E4));a.ka.push(setInterval(mkp8a("si:XHR.MaxInFlight",()=>{a.H=Math.max(0,a.H-1)}),3E5))}
function mkpab(a){a.ka.forEach(b=>clearInterval(b))}function mkpbb(a,b){mkpcb(a,b.settings,b.priority).then(c=>{b.resolve(c)}).catch(c=>{b.reject(c)}).then(()=>{mkp6(a)})}function mkp6(a){!a.J&&a.H<a.va&&0<a.da.R()&&mkpbb(a,a.da.dequeue())}function mkpdb(a,b,c){return __awaiter(a,void 0,void 0,function*(){if(void 0===b.id)return c;try{yield c}finally{this.J||delete this.aa[b.id]}return c})}
function mkpeb(a,b,c,d){mkp6(a);return new Promise((e,f)=>{setTimeout(()=>a.enqueue({settings:b,priority:d,resolve:e,reject:f}),c)})}
function mkpcb(a,b,c){b=mkpha(b);b.type||(b.type="GET");void 0===b.timeout&&(b.timeout=2E4);if("GET"==b.type.toUpperCase()){var d=new mkpW(b.url);if("blob"!=d.I){if(mkpe(b.data))for(var e in b.data)void 0!==b.data[e]&&mkp3a(d,e,b.data[e]);else mkpp(b.data)&&d.setQuery(b.data,!0);!1===b.cache&&mkp3a(d,"__cachebuster",mkp7a());b.url=d.toString()}}else mkpp(b.data)?(d=b.headers&&b.headers["Content-Type"],b.contentType=b.contentType||(mkpc(d)?d[0]:d)||"text/plain; charset=utf-8"):mkpa.FormData&&b.data instanceof
FormData||mkpa.Blob&&b.data instanceof Blob||mkpa.File&&b.data instanceof File||void 0===b.data||(b.data=JSON.stringify(b.data),d="application/json; charset=utf-8",b.headers&&(e=b.headers["Content-Type"],mkpp(e)&&(d=e)),b.contentType=b.contentType||d);void 0!==b.contentType&&(mkpe(b.headers)||(b.headers={}),b.headers["Content-Type"]=b.contentType);b=a.filters.reduce((h,l)=>l.cb(h),b);if(a.filters.some(h=>h.La?h.La(b):!1))return new Promise(h=>h({responseText:"filtered",status:0,abort:()=>null,getResponseHeader:()=>
null,getAllResponseHeaders:()=>null}));a.H++;const f=mkpfb(b);b.Ra&&b.Ra(f.xhr);const g=h=>{a.J||(a.H=Math.max(0,a.H-1),mkp6(a));return h};d=mkpgb(a,f.promise,b.timeout||0).then(g).catch(h=>{g(h);if(h instanceof Error&&h&&"request timed out"==h.message)throw a.dispatchEvent(new mkpPa(h,b,f.xhr,c)),new mkp7(`Timeout after ${b.timeout}ms`,f.xhr,b,h);throw h;});const k=b.retry;if(k){const h=void 0!=b.ya?b.ya+1:0;b.ya=h;h<k.limit&&(d=d.catch(l=>{var m=l instanceof mkp7?l.response:mkphb&&l instanceof XMLHttpRequest||
mkp9a(l)?l:void 0;const n=k.hb||mkp5.Da;if(m&&n(m))return l=mkpx(b,0),k.url&&(l.url=k.url),mkpeb(a,l,k.delay*Math.pow(2,h)*(1+.6*Math.random()-.3),c);throw l;}))}return a.filters.reduceRight((h,l)=>l.bb(h,b),d)}function mkpgb(a,b,c){return 0!==c?mkp6a(b,c+a.Pa):b}
var mkp8=mkp5=class extends mkpTa{constructor(a){super();this.filters=a;this.status=[];this.aa={};a=mkp5a();a.resolve();this.xa=a;this.U=0;this.va=12;this.da=new mkpS;this.Fa=[];this.Ia=!1;this.ka=[];this.Pa=5E3;mkp$a(this)}set H(a){0!==this.U&&0===a?this.xa.resolve():0===this.U&&0!==a&&(this.xa=mkp5a());this.U=a}get H(){return this.U}G(){mkpab(this);this.removeAllListeners();super.G()}enqueue(a){0===a.priority?mkpbb(this,a):this.Ia&&3==a.priority?this.Fa.push(a):this.da.enqueue(a.priority,a);mkp6(this)}execute(a,
b=2){if(this.J)throw Error("Cannot execute on disposed XHR object");if(void 0!==a.id&&a.id in this.aa)return this.aa[a.id];var c=new Promise((d,e)=>{this.enqueue({settings:a,resolve:d,reject:e,priority:b})});c=mkpdb(this,a,c);a.id&&(this.aa[a.id]=c);return c}static Da(a){return!a.status||500<=a.status}static responseText(a){return a.responseText}};
mkp8=mkp5=__decorate([function(a){return b=>{var c=Reflect.getMetadata("design:paramtypes",b)||[];mkpK.register(b,mkpv(c),{Ma:!1});a&&a.Ka&&(c=a.Ka,b=new mkpu(c,null,mkpOa,mkpv([b]),null,!1),mkpL.set(c,b))}}(),__metadata("design:paramtypes",[Array])],mkp8);
var mkp7=class extends Error{constructor(a,b,c,d){var e;super(`XhrError: ${(null===d||void 0===d?0:d.message)?d.message+" ":""}${a}.\nResponse: HTTP ${b.status}\nRequest: ${null!==(e=c.type)&&void 0!==e?e:""} ${c.url}`);this.response=b;if((this.cause=d)&&d.stack&&this.stack){this.cause=this.cause;try{const f=this.stack.substring(0,this.stack.indexOf(this.message)+this.message.length),g=d.stack.substring(d.stack.indexOf(d.message)+d.message.length);this.stack=f+g}catch(f){}}}},mkphb="undefined"!==
typeof XMLHttpRequest,mkpPa=class extends mkpP{constructor(a,b,c,d){super();this.error=a;this.settings=b;this.xhr=c;this.priority=d}},mkpRa=new mkpO;function mkpib(a){try{return mkpN.parse(a.responseText)}catch(b){}}mkph("lucid.net.XHR.parseJson",mkpib);var mkp9=class{constructor(a){this.xhr=a;this.Oa=3E3;this.url=mkpt+"/marketo/activity"}Na(a){return this.xhr.execute({type:"POST",url:this.url,data:a,timeout:this.Oa},3).then(mkpib)}};mkp9=__decorate([mkpM(),__metadata("design:paramtypes",[mkp8])],mkp9);var mkpjb;mkpjb=new mkpC;Promise.resolve();new Promise(()=>{});function mkpkb(a,b,{Ca:c,jb:d}={}){if(a)if(!a.aborted||(null===c||void 0===c?0:c.aborted)){if(a===c)throw Error("cancelSignal must not be the same signal that we are listening to.");a.addEventListener("abort",b,{once:!0,signal:c})}else d?b():Promise.resolve().then(()=>{b()})};function mkpfb(a){const b=a.type&&a.type.toUpperCase()||"GET",c=new XMLHttpRequest,d=new AbortController,e=Error("NetworkXHR");return{promise:(new Promise((f,g)=>{mkpkb(a.signal,()=>{c.onreadystatechange=null;c.ontimeout=null;c.onerror=null;c.abort();g(new DOMException("XMLHttpRequest aborted by client","AbortError"))},{Ca:d.signal});c.onreadystatechange=()=>{4==c.readyState&&(200<=c.status&&300>c.status?f(c):setTimeout(()=>{g(new mkp7("Unknown Failure",c,a,e))},50))};c.onerror=()=>{c.onreadystatechange=
null;c.ontimeout=null;g(new mkp7("Failed",c,a,e))};c.ontimeout=()=>{c.onreadystatechange=null;c.onerror=null;g(new mkp7(`Timeout after ${a.timeout}ms`,c,a,e))};c.open(b,a.url,!0);void 0!==a.withCredentials&&(c.withCredentials=a.withCredentials);void 0!==a.timeout&&(c.timeout=a.timeout);void 0!==a.responseType&&(c.responseType=a.responseType);a.Ea&&c.addEventListener("progress",k=>{var h;k instanceof ProgressEvent&&(null===(h=a.Ea)||void 0===h?void 0:h.call(a,k))});a.Qa&&c.upload.addEventListener("progress",
k=>{var h;k instanceof ProgressEvent&&(null===(h=a.Qa)||void 0===h?void 0:h.call(a,k))});mkplb(a.url)||c.setRequestHeader("X-Requested-With","XMLHttpRequest");if(mkpe(a.headers))for(const k in a.headers){const h=a.headers[k];if(mkpp(h))c.setRequestHeader(k,h);else if(mkpc(h))for(let l=0;l<h.length;l++)c.setRequestHeader(k,h[l])}c.send(a.data)})).finally(()=>{d.abort()}),xhr:c}}
function mkplb(a){const b=new mkpW(location.href);a=b.resolve(new mkpW(a));return!((!a.A&&!b.A||a.A==b.A)&&(null==a.F&&null==b.F||a.F==b.F))}var mkp$=class extends mkp8{constructor(a=[]){super(a)}};
mkp$=__decorate([mkpM(),__param(0,function(a){return(b,c,d)=>{c=mkpv([a])[0];var e,f;mkpF.has(b)||mkpF.set(b,{O:[],options:{}});b=null!==(f=null===(e=mkpF.get(b))||void 0===e?void 0:e.O)&&void 0!==f?f:[];b[d]=b[d]&&0!==b[d].operation?new mkpw(c.type,b[d].operation):c}}(mkpjb)),__metadata("design:paramtypes",[Array])],mkp$);mkpa.ba||(mkpa.ba=new mkp9(new mkp$));mkph("lucid.marketo.recordEvent",mkpa.ba.Na.bind(mkpa.ba));
